import{x as R,y as I,a8 as H,D as _,z as q,j as W,b1 as b,b2 as O,b3 as y,r as E,k as z,n as V,K as j,h as L,aM as D,b4 as G,o as K,c as U,b as Y,A as J,W as N,S as p,am as C,a1 as Q,H as X,a2 as Z}from"./index-C5s8F-_r.js";import{C as ee}from"./event-BB_Ol6Sd.js";import{a as te}from"./scroll-yVBfE2ub.js";const ne=R({zIndex:{type:I([Number,String]),default:100},target:{type:String,default:""},offset:{type:Number,default:0},position:{type:String,values:["top","bottom"],default:"top"}}),le={scroll:({scrollTop:t,fixed:l})=>H(t)&&_(l),[ee]:t=>_(t)},T="ElAffix",oe=q({name:T}),re=q({...oe,props:ne,emits:le,setup(t,{expose:l,emit:n}){const e=t,c=W("affix"),a=b(),h=b(),f=b(),{height:i}=O(),{height:m,width:x,top:w,bottom:F,update:g}=y(h,{windowScroll:!1}),d=y(a),s=E(!1),S=E(0),v=E(0),B=z(()=>({height:s.value?`${m.value}px`:"",width:s.value?`${x.value}px`:""})),$=z(()=>{if(!s.value)return{};const o=e.offset?X(e.offset):0;return{height:`${m.value}px`,width:`${x.value}px`,top:e.position==="top"?o:"",bottom:e.position==="bottom"?o:"",transform:v.value?`translateY(${v.value}px)`:"",zIndex:e.zIndex}}),k=()=>{if(f.value)if(S.value=f.value instanceof Window?document.documentElement.scrollTop:f.value.scrollTop||0,e.position==="top")if(e.target){const o=d.bottom.value-e.offset-m.value;s.value=e.offset>w.value&&d.bottom.value>0,v.value=o<0?o:0}else s.value=e.offset>w.value;else if(e.target){const o=i.value-d.top.value-e.offset-m.value;s.value=i.value-e.offset<F.value&&i.value>d.top.value,v.value=o<0?-o:0}else s.value=i.value-e.offset<F.value},A=()=>{g(),n("scroll",{scrollTop:S.value,fixed:s.value})};return V(s,o=>n("change",o)),j(()=>{var o;e.target?(a.value=(o=document.querySelector(e.target))!=null?o:void 0,a.value||L(T,`Target does not exist: ${e.target}`)):a.value=document.documentElement,f.value=te(h.value,!0),g()}),D(f,"scroll",A),G(k),l({update:k,updateRoot:g}),(o,ae)=>(K(),U("div",{ref_key:"root",ref:h,class:N(p(c).b()),style:C(p(B))},[Y("div",{class:N({[p(c).m("fixed")]:s.value}),style:C(p($))},[J(o.$slots,"default")],6)],6))}});var se=Q(re,[["__file","affix.vue"]]);const ie=Z(se),P=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],u=(()=>{if(typeof document>"u")return!1;const t=P[0],l={};for(const n of P)if((n==null?void 0:n[1])in document){for(const[c,a]of n.entries())l[t[c]]=a;return l}return!1})(),M={change:u.fullscreenchange,error:u.fullscreenerror};let r={request(t=document.documentElement,l){return new Promise((n,e)=>{const c=()=>{r.off("change",c),n()};r.on("change",c);const a=t[u.requestFullscreen](l);a instanceof Promise&&a.then(c).catch(e)})},exit(){return new Promise((t,l)=>{if(!r.isFullscreen){t();return}const n=()=>{r.off("change",n),t()};r.on("change",n);const e=document[u.exitFullscreen]();e instanceof Promise&&e.then(n).catch(l)})},toggle(t,l){return r.isFullscreen?r.exit():r.request(t,l)},onchange(t){r.on("change",t)},onerror(t){r.on("error",t)},on(t,l){const n=M[t];n&&document.addEventListener(n,l,!1)},off(t,l){const n=M[t];n&&document.removeEventListener(n,l,!1)},raw:u};Object.defineProperties(r,{isFullscreen:{get:()=>!!document[u.fullscreenElement]},element:{enumerable:!0,get:()=>document[u.fullscreenElement]??void 0},isEnabled:{enumerable:!0,get:()=>!!document[u.fullscreenEnabled]}});u||(r={isEnabled:!1});const me=r;export{ie as E,me as s};
