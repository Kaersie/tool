import{o as E,c as W,W as re,r as T,b5 as ke,n as H,A as I,S as f,d as ze,w as U,am as F,f as G,X as J,Q as We,B as d,K as Be,a as Ke,b as j,L as Me,b6 as Oe,i as be,b7 as Fe,t as He}from"./index-B8eLAHPn.js";import{_ as Ie}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css               *//* empty css                *//* empty css                   *//* empty css                                               */const Ue={},je=Object.assign(Ue,{__name:"resizer",props:["split"],setup(r){return(h,o)=>(E(),W("div",{class:re(["Resizer",r.split])},null,2))}}),Xe={name:"Pane"},Ce=Object.assign(Xe,{props:{split:{validator(r){return["horizontal","vertical"].indexOf(r)>=0},required:!0}},setup(r){const h=r,o=T(""),{split:v}=ke(h);return H(v,k=>{o.value=k},{immediate:!0}),(k,P)=>(E(),W("div",{class:re(f(o))},[I(k.$slots,"default")],2))}}),Ye=["split"],Qe={name:"Split"},Se=Object.assign(Qe,{props:{layout:{type:Boolean,default:!1},minPercent:{type:Number,default:10},defaultPercent:{type:Number,default:50},split:{validator(r){return["horizontal","vertical"].indexOf(r)>=0},required:!0}},emits:["resize"],setup(r,{emit:h}){const o=r,{layout:v,minPercent:k,defaultPercent:P,split:C}=ke(o),g=T("width"),z=T("left"),y=T(!1),A=T(50);H(C,u=>{g.value=u==="horizontal"?"width":"height",z.value=u==="horizontal"?"left":"top"},{immediate:!0}),H(P,u=>{A.value=u},{immediate:!0});const Z=h;function ee(){let u=null;return V=>{u||(u=setTimeout(()=>{V(),clearTimeout(u),u=null},100))}}const te=new ee;function ne(){y.value=!0}function X(){y.value=!1}function ce(u){if(u.buttons===0||u.which===0||!y.value)return;let V=0,b=u.currentTarget;if(C.value==="horizontal")for(;b;)V+=b.offsetLeft,b=b.offsetParent;else for(;b;)V+=b.offsetTop,b=b.offsetParent;const pe=C.value==="horizontal"?u.pageX:u.pageY,Y=C.value==="horizontal"?u.currentTarget.offsetWidth:u.currentTarget.offsetHeight,B=Math.floor((pe-V)/Y*1e4)/100;B>k.value&&B<100-k.value&&(A.value=B),te(()=>{Z("resize",u)})}return(u,V)=>(E(),W("div",{style:F({userSelect:f(y)?"none":""}),class:"split_container clearfix",onMouseup:X,onMousemove:ce,ref:"splitContainerRef",split:f(C)},[ze(Ce,{class:"split_pane split_paneL",split:f(C),style:F({[f(g)]:f(A)+"%"})},{default:U(()=>[I(u.$slots,"paneL")]),_:3},8,["split","style"]),f(v)?J("",!0):(E(),G(je,{key:0,style:F({[f(z)]:f(A)+"%"}),split:f(C),onMousedown:ne},null,8,["style","split"])),f(v)?J("",!0):(E(),G(Ce,{key:1,class:"split_pane split_paneR",split:f(C),style:F({[f(g)]:100-f(A)+"%"})},{default:U(()=>[I(u.$slots,"paneR")]),_:3},8,["split","style"]))],44,Ye))}}),Ge={name:"SplitWindow"},Je={id:"split_window"};function Ze(r,h,o,v,k,P){return E(),W("div",Je,[I(r.$slots,"default")])}const et=Ie(Ge,[["render",Ze]]);function m(r,h){var o=r;if(o.nodeType===1&&[...o==null?void 0:o.classList].includes(h))return o;for(;o=o.parentNode;)if(o&&o.nodeType===1&&[...o==null?void 0:o.classList].includes(h))return o;return null}function tt(r){const h={...r};return Object.keys(h).forEach(o=>{h[o]=h[o]+"px"}),h}const D={top:"top",bottom:"bottom",left:"left",right:"right"},S={horizontal:"horizontal",vertical:"vertical"},nt={class:"placeholder_default flex a-c j-c"},it={name:"VueDragSplit"},lt=Object.assign(it,{props:{showPlaceHolder:{type:Boolean,default:!0},createTabActions:{type:Function,default:r=>null},createAddBtn:{type:Function,default:r=>null},createClose:{type:Function,default:r=>null},createTab:{type:Function,default:r=>null},createTabView:{type:Function,default:r=>null},activeLabelClassName:{type:String,default:"label_active"},canCloseWindow:{type:Function,default:async(r,h)=>!0},onCloseWindow:{type:Function,default:(r,h)=>{}},activeTabKeySync:{type:[String,Number],default:"1"},windowListSync:{type:Array,default:[]},layoutClass:{type:String,default:""},generateWindowConfig:{type:Function,default:()=>({}),required:!0}},emits:["update:windowListSync","update:activeTabKeySync","resize","dragEnd","closeWindow"],setup(r,{expose:h,emit:o}){const v=Me(),{AddBtn:k,CloseBtn:P,Tab:C,TabActions:g,TabView:z}=We();function y(e,t){return e&&e(t)[0]}const{createTabActions:A,createAddBtn:Z,createClose:ee,createTab:te,createTabView:ne,activeLabelClassName:X,onCloseWindow:ce,canCloseWindow:u,activeTabKeySync:V,windowListSync:b,layoutClass:pe,generateWindowConfig:Y}=r,B=d("div",{class:"add_btn",onclick:()=>{Q()}},d("div",{title:"新建窗口"},"+")),xe=d("div",{class:"close_inner",title:"关闭窗口"},"x"),Te=e=>d("span",{style:{fontSize:"12px",color:"white"}},e.label),de=d("svg",{t:"1671501618431",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2711",width:"20",height:"20"},d("path",{d:"M252.068571 906.496h520.283429c89.581714 0 134.144-44.562286 134.144-132.845714V250.331429c0-88.283429-44.562286-132.845714-134.144-132.845715H252.068571c-89.142857 0-134.582857 44.141714-134.582857 132.845715V773.668571c0 88.704 45.44 132.845714 134.582857 132.845715z m1.28-68.992c-42.843429 0-66.852571-22.710857-66.852571-67.291429V253.805714c0-44.580571 24.009143-67.291429 66.852571-67.291428h222.866286v651.008z m517.723429-651.008c42.422857 0 66.432 22.710857 66.432 67.291429V770.194286c0 44.580571-24.009143 67.291429-66.432 67.291428H548.205714V186.496z","p-id":"2712",fill:"#ffffff"})),Ee=e=>[d("div",{class:"action_btn",title:"水平拆分",onClick:()=>{se(null,S.horizontal)}},de),d("div",{class:"action_btn",title:"竖直拆分",style:{Transform:"rotate(90deg)"},onClick:()=>{se(null,S.vertical)}},de)],Ve=e=>d("div",null,[d("h3",null,"标签"+e.key+"的默认内容")]),K=o,x=T([]);H(x,e=>{K("update:windowListSync",e)},{deep:!0}),Be(()=>{if((b==null?void 0:b.length)>0)for(const e of b)Q(e)});const q=T("");q.value=V,H(q,e=>{K("update:activeTabKeySync",e)});function M(e){return x.value.find(t=>t.key==q.value)}function ue(e,t){$(e)}function $(e){q.value=e;const t=v.vnode.el.querySelector(`.split_view_content[tabviewkey='${e}']`);if(t)for(const n of t.parentElement.querySelectorAll(".split_view_content")){if(n.getAttribute("tabviewkey")==e){n.style.zIndex=2;continue}n.style.zIndex=1}for(const n of v.vnode.el.querySelectorAll(".header_item[tabkey]")){if(n.getAttribute("tabkey")==e){n.classList.add("label_active",X);continue}n.classList.remove("label_active",X)}}function fe(e){K("resize",e)}const L=T({top:0,left:0,height:document.body.clientHeight,width:document.body.clientWidth}),p=Ke({isUpdating:!1,dropPosition:D.right});function Pe(e){const{target:t,x:n,y:i}=e;p.isUpdating=!0,p.target=t,p.tabKey=t.getAttribute("tabKey"),p.tabEls=[...t.parentNode.querySelectorAll(".header_item[tabkey]")]}function he(e){if(e.preventDefault(),!p.isUpdating)return;let{target:t,x:n,y:i}=e;t.getBoundingClientRect();const a=m(t,"split_view_label_wrapper")??m(t,"split_view_content");if(!a)return;p.respectLayout=a;const l=a.getBoundingClientRect(),w=v.vnode.el.getBoundingClientRect(),s=l.x-w.x,c=l.y-w.y;if(n=n-w.x,i=i-w.y,a.className.includes("split_view_label_wrapper")){L.value={top:c,left:s,height:l.height,width:l.width},p.dropPosition="inner";return}else if(a.className.includes("split_view_content")){const _=l.height/3,N=l.width/3;n>s&&n<s+l.width&&i>c&&i<c+_?(L.value={top:c,left:s,height:l.height/2,width:l.width},p.dropPosition="top"):n>s&&n<s+l.width&&i>c+_*2&&i<c+l.height?(L.value={top:c+l.height/2,left:s,height:l.height/2,width:l.width},p.dropPosition="bottom"):n>s+N*2&&n<s+l.width&&i>c+_&&i<c+_*2?(L.value={top:c,left:s+l.width/2,height:l.height,width:l.width/2},p.dropPosition="right"):n>s&&n<s+N&&i>c&&i<c+_*2&&(L.value={top:c,left:s,height:l.height,width:l.width/2},p.dropPosition="left")}}function Ae(e){ie(e)}function ie(e){e.preventDefault(),p.isUpdating=!1,L.value={top:0,left:0,height:document.body.clientHeight,width:document.body.clientWidth}}const O={tab:"tab",tabView:"tabView"};function _e(e){ie(e);const{target:t,x:n,y:i}=e;let a,l;m(t,"split_view_label_wrapper")?(a=m(t,"split_view_label_wrapper"),l=O.tab):m(t,"split_view_content_wrapper")&&(a=m(t,"split_view_label_wrapper"),l=O.tabView);const c=[...m(p.target,"split_content_wrapper").querySelectorAll(".split_view_content")].find(N=>N.getAttribute("tabViewKey")===p.tabKey);if(p.tabView=c,p.tabEls.length==1&&p.tabView==p.respectLayout||l==O.tab&&a==m(p.target,"split_view_label_wrapper"))return;ge({},p.target),$(p.tabKey);const _=()=>{requestAnimationFrame(()=>{K("dragEnd",e)})};switch(l){case O.tab:le(a,p.target),a.nextElementSibling.appendChild(p.tabView),_();return;case O.tabView:ye(t,p),_();break}}function le(e,t){e=e.firstElementChild;const n=Array.from((e==null?void 0:e.children)??[]).find(i=>i.className.includes("add_btn_wrapper"));n?e.insertBefore(t,n):e.appendChild(t)}function ye(e,t){let n=".horizontal.split_pane",i=m(e,"split_pane"),a=m(e,"split_container"),l=a.querySelector(n+".split_paneL"),w=a.querySelector(n+".split_paneR"),s;["left","right"].includes(t.dropPosition)?s=S.horizontal:["top","bottom"].includes(t.dropPosition)&&(s=S.vertical);const c=d(Se,{onResize:fe,minPercent:20,split:s,defaultPercent:50},{paneR:()=>we(null,null)});c.appContext=v.appContext;let _=R(c);_.querySelector(`.${s}.split_pane.split_paneL`).appendChild(i.children[0]),le(_.querySelector(".split_paneR .split_view_label_wrapper"),t.target),_.querySelector(".split_paneR .split_view_content_wrapper").appendChild(t.tabView),i.appendChild(_),l=_.children[0],w=_.children[2],requestAnimationFrame(()=>{switch(t.dropPosition){case D.top:ve(l,w);break;case D.bottom:break;case D.left:ve(l,w);break}})}function ve(e,t){let n=e.children[0];e.appendChild(t.children[0]),t.appendChild(n)}const qe=e=>d("div",{class:"close_btn",onclick:t=>{me(e,t)}},y(P,e)||ee(e)||xe),oe=e=>d("div",{class:"header_item flex a-c",ondragstart:Pe,draggable:!0,onclick:t=>{ue(e.key)},tabKey:e.key},[y(C,e)||te(e)||Te(e),qe(e)]),ae=e=>d("div",{class:"split_view_content",tabViewKey:e.key,onclick:t=>{ue(e.key)}},[y(z,e)||ne(e)||Ve(e)]);d("svg",{t:"1679533237927",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2333",width:"18",height:"18"},d("path",{d:"M320 885.333333c-8.533333 0-17.066667-4.266667-23.466667-10.666666-12.8-12.8-10.666667-34.133333 2.133334-44.8L654.933333 512 298.666667 194.133333c-12.8-10.666667-14.933333-32-2.133334-44.8 10.666667-12.8 32-14.933333 44.8-2.133333l384 341.333333c6.4 6.4 10.666667 14.933333 10.666667 23.466667 0 8.533333-4.266667 17.066667-10.666667 23.466667l-384 341.333333c-6.4 6.4-12.8 8.533333-21.333333 8.533333z",fill:"#ffffff","p-id":"2334"}));const we=(e,t)=>d("div",{class:"split_view"},[d("div",{class:"split_content_wrapper flex column"},[d("div",{class:"split_view_label_wrapper flex",ondragover:he,ondrop:_e},[d("div",{class:"split_view_label_box flex"},[e,d("div",{class:"add_btn_wrapper"},[y(k)||Z(M())||B])]),d("div",{class:"split_view_label_action_wrapper flex"},y(g,M())||A(M())||Ee(M()))]),d("div",{class:"split_view_content_wrapper",ondragover:he,ondrop:_e},[t])])]),Le=e=>{const t=we(oe(e),ae(e)),n=d(Se,{onResize:fe,minPercent:20,split:S.horizontal,defaultPercent:100,layout:!0},{paneL:()=>t});return n.appContext=v.appContext,n};function R(e){let t=document.createElement("div");return Oe(e,t),t.firstElementChild}function Q(e){if(e=e||Y(),!e||!e.key)throw new Error("params win is invalid");if(x.value.push(e),e=x.value.find(t=>t.key===e.key),document.querySelector(".split_container")){const t=m(v.vnode.el.querySelector(`.header_item[tabkey='${q.value}']`),"split_content_wrapper");le(t.querySelector(".split_view_label_wrapper.flex"),R(oe(e))),t.querySelector(".split_view_content_wrapper").appendChild(R(ae(e)))}else{const t=R(Le(e));v.vnode.el.appendChild(t)}$(e.key)}function se(e,t=S.vertical){if(x.value.length<=0)return;if(e=e||Y(),!e||!e.key)throw new Error("params win is invalid");const n=R(oe(e)),i=R(ae(e)),a=m(v.vnode.el.querySelector(`.header_item[tabkey='${q.value}']`),"split_content_wrapper");ye(a,{dropPosition:t==S.vertical?D.bottom:D.right,target:n,tabView:i}),x.value.push(e),$(e.key)}h({windowList:x,newWindow:Q,splitWindow:se,getActiveWindow:M,closeWindow:me,activeTab:$});async function me(e,t,n=!1){var w,s;if((w=t==null?void 0:t.stopPropagation)==null||w.call(t),t=t||{target:v.vnode.el.querySelector(`.header_item[tabkey='${e.key}']`)},!n&&!await u(e,t))return;ge(e,t.target);const i=m(t.target,"header_item"),a=i.getAttribute("tabkey"),l=Array.from(((s=i.parentNode.parentNode.nextElementSibling)==null?void 0:s.children)??[]).find(c=>c.getAttribute("tabviewkey")==a);i.parentNode.removeChild(i),l.parentNode.removeChild(l),Ne(e),K("closeWindow",e,t)}function ge(e,t){const n=m(t,"split_container"),i=n.parentNode,a=m(t,"split_pane"),l=a.className.includes(S.vertical)?S.vertical:S.horizontal,w=a.className.includes("split_paneL")?"left":"right";requestAnimationFrame(()=>{var s;if(!((s=a==null?void 0:a.querySelector(".split_view_content_wrapper"))!=null&&s.firstElementChild)){const c=w=="left"?2:0,_=n.children[c];if(_){switch(l){case S.vertical:_.style.height="100%";break;case S.horizontal:_.style.width="100%";break}const N=[...n.children].find(De=>De.className.includes("Resizer"));N&&n.removeChild(N),a.parentNode.removeChild(a)}}if(Re(n))try{i.removeChild(n)}catch{}$e()})}function Ne(e){var t;x.value=x.value.filter(n=>n.key!=e.key),e.key==q.value&&$(((t=x.value.at(-1))==null?void 0:t.key)??"-1")}function $e(e){const t=document.querySelectorAll(".split_container:has(.split_container)");for(const i of t)i.children.length==1&&(i.parentNode.appendChild(i.querySelector(".split_container")),i.parentNode.removeChild(i));const n=document.querySelectorAll(".split_pane:has(.split_pane)");for(const i of n)i.firstElementChild.children.length==1&&(i.appendChild(i.querySelector(".split_view")),i.removeChild(i.querySelector(".split_container")))}function Re(e){var w,s;const t=[...e.children],n=t.find(c=>c.className.includes("split_paneL")),i=t.find(c=>c.className.includes("split_paneR")),a=!((w=n==null?void 0:n.querySelector(".split_view_content_wrapper"))!=null&&w.firstElementChild),l=!((s=i==null?void 0:i.querySelector(".split_view_content_wrapper"))!=null&&s.firstElementChild);return!!(!n&&!i||!i&&a||!n&&l||a&&l)}return(e,t)=>(E(),G(f(et),{onMouseup:ie,onMouseleave:Ae,class:re(r.layoutClass)},{default:U(()=>[r.showPlaceHolder&&f(x).length<=0?I(e.$slots,"placeHolder",{key:0,class:"placeholder"},()=>[j("div",nt,[j("button",{onClick:t[0]||(t[0]=n=>Q())},"新建窗口")])]):J("",!0),f(p).isUpdating?(E(),W("div",{key:1,class:"drag_modal_wrapper",style:F(f(tt)(f(L)))},null,4)):J("",!0)]),_:3},8,["class"]))}}),ot={class:"layout"},at=["title"],st=j("div",{style:{height:"100%"}},[j("iframe",{src:"#/index2",scrolling:"yes",frameborder:"0",style:{width:"100%",height:"100%","background-color":"#141414"}})],-1),rt={},_t=Object.assign(rt,{__name:"split-clock",setup(r){const h=T(""),o=T(new Array(2).fill(1).map((g,z)=>({key:z.toString(),label:"Tab"})));function v(g){return{key:Date.now(),label:"Tab"}}function k(g){console.log("onCloseWindow :>> ",g)}function P(g){console.log("onResize :>> ",g)}function C(g){console.log("onDragend :>> ",g)}return(g,z)=>(E(),W("div",ot,[(E(),G(Fe,null,[ze(f(lt),{generateWindowConfig:v,windowListSync:f(o),"onUpdate:windowListSync":z[0]||(z[0]=y=>be(o)?o.value=y:null),activeTabKeySync:f(h),"onUpdate:activeTabKeySync":z[1]||(z[1]=y=>be(h)?h.value=y:null),onCloseWindow:k,onResize:P,onDragEnd:C},{Tab:U(y=>[j("p",{style:{color:"white","font-size":"12px"},title:y.label},He(y.label),9,at)]),TabView:U(y=>[st]),_:1},8,["windowListSync","activeTabKeySync"])],1024))]))}});export{_t as default};
