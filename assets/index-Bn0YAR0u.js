import{i as se,h as ae,j as q,k as A,l as K,m as W,n as U,p as le,q as ne,s as re,v as ie,N as H,x as L,y as O,z as Y,d as B,P as V,A as E,B as ue,C as de,D as ce,E as fe,G as Z,r as T,H as J,I as ve,J as ye,K as me,L as pe,M as be,O as j,Q as Ce,o as g,f as he,w as M,R as we,S as o,T as ke,b as G,U as ge,V as Se,W as w,c as F,t as Be,X as S,Y as Ee,Z as Te,_ as Ae,$ as De,a0 as Ie,a1 as Pe,a2 as Fe}from"./index-C5s8F-_r.js";import{U as Q}from"./event-BB_Ol6Sd.js";import{u as Me}from"./index-0qsWRH-7.js";import{u as Oe}from"./index-9mPCBuOW.js";import{u as Le}from"./use-global-config-Yrj5ys2j.js";import{g as ze}from"./scroll-yVBfE2ub.js";const Ne=(e,l={})=>{se(e)||ae("[useLockscreen]","You need to pass a ref param to this function");const n=l.ns||q("popup"),d=A(()=>n.bm("parent","hidden"));if(!K||W(document.body,d.value))return;let a=0,r=!1,t="0";const f=()=>{setTimeout(()=>{ie(document==null?void 0:document.body,d.value),r&&document&&(document.body.style.width=t)},200)};U(e,v=>{if(!v){f();return}r=!W(document.body,d.value),r&&(t=document.body.style.width),a=ze(n.namespace.value);const i=document.documentElement.clientHeight<document.body.scrollHeight,p=le(document.body,"overflowY");a>0&&(i||p==="scroll")&&r&&(document.body.style.width=`calc(100% - ${a}px)`),ne(document.body,d.value)}),re(()=>f())},$e=e=>{if(!e)return{onClick:H,onMousedown:H,onMouseup:H};let l=!1,n=!1;return{onClick:t=>{l&&n&&e(t),l=n=!1},onMousedown:t=>{l=t.target===t.currentTarget},onMouseup:t=>{n=t.target===t.currentTarget}}},xe=L({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:O([String,Array,Object])},zIndex:{type:O([String,Number])}}),Re={click:e=>e instanceof MouseEvent},_e="overlay";var He=Y({name:"ElOverlay",props:xe,emits:Re,setup(e,{slots:l,emit:n}){const d=q(_e),a=v=>{n("click",v)},{onClick:r,onMousedown:t,onMouseup:f}=$e(e.customMaskEvent?void 0:a);return()=>e.mask?B("div",{class:[d.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:r,onMousedown:t,onMouseup:f},[E(l,"default")],V.STYLE|V.CLASS|V.PROPS,["onClick","onMouseup","onMousedown"]):ue("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[E(l,"default")])}});const Ve=He,Ue=L({center:Boolean,alignCenter:Boolean,closeIcon:{type:de},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),qe=L({...Ue,appendToBody:Boolean,appendTo:{type:O(String),default:"body"},beforeClose:{type:O(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:Boolean,headerAriaLevel:{type:String,default:"2"}}),Ye={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[Q]:e=>ce(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},We=(e,l)=>{var n;const a=pe().emit,{nextZIndex:r}=fe();let t="";const f=Z(),v=Z(),i=T(!1),p=T(!1),y=T(!1),D=T((n=e.zIndex)!=null?n:r());let c,m;const z=Le("namespace",be),N=A(()=>{const u={},h=`--${z.value}-dialog`;return e.fullscreen||(e.top&&(u[`${h}-margin-top`]=e.top),e.width&&(u[`${h}-width`]=J(e.width))),u}),$=A(()=>e.alignCenter?{display:"flex"}:{});function x(){a("opened")}function R(){a("closed"),a(Q,!1),e.destroyOnClose&&(y.value=!1)}function _(){a("close")}function b(){m==null||m(),c==null||c(),e.openDelay&&e.openDelay>0?{stop:c}=j(()=>C(),e.openDelay):C()}function I(){c==null||c(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=j(()=>P(),e.closeDelay):P()}function k(){function u(h){h||(p.value=!0,i.value=!1)}e.beforeClose?e.beforeClose(u):I()}function s(){e.closeOnClickModal&&k()}function C(){K&&(i.value=!0)}function P(){i.value=!1}function X(){a("openAutoFocus")}function ee(){a("closeAutoFocus")}function oe(u){var h;((h=u.detail)==null?void 0:h.focusReason)==="pointer"&&u.preventDefault()}e.lockScroll&&Ne(i);function te(){e.closeOnPressEscape&&k()}return U(()=>e.modelValue,u=>{u?(p.value=!1,b(),y.value=!0,D.value=ve(e.zIndex)?r():D.value++,ye(()=>{a("open"),l.value&&(l.value.scrollTop=0)})):i.value&&I()}),U(()=>e.fullscreen,u=>{l.value&&(u?(t=l.value.style.transform,l.value.style.transform=""):l.value.style.transform=t)}),me(()=>{e.modelValue&&(i.value=!0,y.value=!0,b())}),{afterEnter:x,afterLeave:R,beforeLeave:_,handleClose:k,onModalClick:s,close:I,doClose:P,onOpenAutoFocus:X,onCloseAutoFocus:ee,onCloseRequested:te,onFocusoutPrevented:oe,titleId:f,bodyId:v,closed:p,style:N,overlayDialogStyle:$,rendered:y,visible:i,zIndex:D}},Ze=L({...qe,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),je=Ye,Ge=["aria-label","aria-labelledby","aria-describedby"],Ke=["id","aria-level"],Je=["aria-label"],Qe=["id"],Xe=Y({name:"ElDrawer",inheritAttrs:!1}),eo=Y({...Xe,props:Ze,emits:je,setup(e,{expose:l}){const n=e,d=Ce();Me({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},A(()=>!!d.title));const a=T(),r=T(),t=q("drawer"),{t:f}=Oe(),{afterEnter:v,afterLeave:i,beforeLeave:p,visible:y,rendered:D,titleId:c,bodyId:m,zIndex:z,onModalClick:N,onOpenAutoFocus:$,onCloseAutoFocus:x,onFocusoutPrevented:R,onCloseRequested:_,handleClose:b}=We(n,a),I=A(()=>n.direction==="rtl"||n.direction==="ltr"),k=A(()=>J(n.size));return l({handleClose:b,afterEnter:v,afterLeave:i}),(s,C)=>(g(),he(Ie,{to:"body",disabled:!s.appendToBody},[B(De,{name:o(t).b("fade"),onAfterEnter:o(v),onAfterLeave:o(i),onBeforeLeave:o(p),persisted:""},{default:M(()=>[we(B(o(Ve),{mask:s.modal,"overlay-class":s.modalClass,"z-index":o(z),onClick:o(N)},{default:M(()=>[B(o(ke),{loop:"",trapped:o(y),"focus-trap-el":a.value,"focus-start-el":r.value,onFocusAfterTrapped:o($),onFocusAfterReleased:o(x),onFocusoutPrevented:o(R),onReleaseRequested:o(_)},{default:M(()=>[G("div",ge({ref_key:"drawerRef",ref:a,"aria-modal":"true","aria-label":s.title||void 0,"aria-labelledby":s.title?void 0:o(c),"aria-describedby":o(m)},s.$attrs,{class:[o(t).b(),s.direction,o(y)&&"open"],style:o(I)?"width: "+o(k):"height: "+o(k),role:"dialog",onClick:C[1]||(C[1]=Se(()=>{},["stop"]))}),[G("span",{ref_key:"focusStartRef",ref:r,class:w(o(t).e("sr-focus")),tabindex:"-1"},null,2),s.withHeader?(g(),F("header",{key:0,class:w(o(t).e("header"))},[s.$slots.title?E(s.$slots,"title",{key:1},()=>[S(" DEPRECATED SLOT ")]):E(s.$slots,"header",{key:0,close:o(b),titleId:o(c),titleClass:o(t).e("title")},()=>[s.$slots.title?S("v-if",!0):(g(),F("span",{key:0,id:o(c),role:"heading","aria-level":s.headerAriaLevel,class:w(o(t).e("title"))},Be(s.title),11,Ke))]),s.showClose?(g(),F("button",{key:2,"aria-label":o(f)("el.drawer.close"),class:w(o(t).e("close-btn")),type:"button",onClick:C[0]||(C[0]=(...P)=>o(b)&&o(b)(...P))},[B(o(Ee),{class:w(o(t).e("close"))},{default:M(()=>[B(o(Te))]),_:1},8,["class"])],10,Je)):S("v-if",!0)],2)):S("v-if",!0),o(D)?(g(),F("div",{key:1,id:o(m),class:w(o(t).e("body"))},[E(s.$slots,"default")],10,Qe)):S("v-if",!0),s.$slots.footer?(g(),F("div",{key:2,class:w(o(t).e("footer"))},[E(s.$slots,"footer")],2)):S("v-if",!0)],16,Ge)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])]),_:3},8,["mask","overlay-class","z-index","onClick"]),[[Ae,o(y)]])]),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var oo=Pe(eo,[["__file","drawer.vue"]]);const io=Fe(oo);export{io as E};
